# ==============================================================================
# BAM Engine Default Configuration
# ==============================================================================
#
# This file provides default parameter values for BAM (Bottom-Up Adaptive
# Macroeconomics) simulations. All parameters can be overridden via:
#
#   1. Custom YAML config file: Simulation.init(config="my_config.yml")
#   2. Keyword arguments: Simulation.init(n_firms=200, seed=42)
#
# Time scale: 1 period = 1 quarter (4 periods = 1 year)
#
# Parameter precedence (later overrides earlier):
#   1. This file (defaults.yml)
#   2. User config file (if provided)
#   3. Keyword arguments (highest priority)
#
# See Also
# --------
# - bamengine.config.schema.Config : Configuration dataclass
# - bamengine.config.validator.ConfigValidator : Validation logic
# - bamengine.simulation.Simulation.init : Initialize simulation
#
# ==============================================================================

# ── POPULATION SIZES ──────────────────────────────────────────────────────────
# Number of agents in each population.
# Recommendation: n_households >= 5 * n_firms for realistic labor markets.

n_firms:              100        # Producer/Employer agents (firms)
n_households:         500        # Worker/Consumer agents (households)
n_banks:               10        # Lender agents (commercial banks)

# ── RUN LENGTH ────────────────────────────────────────────────────────────────
# Default number of periods for Simulation.run() when n_periods not specified.

n_periods:            1000       # Simulation periods (quarters)

# ── STOCHASTIC SHOCK WIDTHS ───────────────────────────────────────────────────
# Maximum magnitude of random shocks (drawn from uniform distribution).
# Example: h_rho = 0.10 means production growth shock in [-10%, +10%].

h_rho:                0.10       # Production growth shock cap (firms)
h_xi:                 0.05       # Wage growth shock cap (firms)
h_phi:                0.10       # Bank operating expense shock cap (banks)
h_eta:                0.10       # Price adjustment shock cap (firms)

# ── SEARCH FRICTIONS ──────────────────────────────────────────────────────────
# Market matching constraints limiting how many partners agents can contact
# per period. Higher values reduce frictions but increase computation time.

max_M:                4          # Job applications per unemployed worker/period
max_H:                2          # Loan applications per firm/period
max_Z:                2          # Shops a household can visit/period

# ── ECONOMY-WIDE STRUCTURAL PARAMETERS ────────────────────────────────────────
# Behavioral and policy parameters affecting all agents.

labor_productivity:   0.50       # Labor productivity (good units per worker)
min_wage_rev_period:  4          # Periods between min wage adjustments
theta:                8          # Job contract base length (periods)
v:                    0.10       # Bank capital requirement coefficient
                                 # Max leverage = 1/v
r_bar:                0.02       # Baseline interest rate (quarterly)
                                 # Policy rate used in bank interest calculations
beta:                 2.50       # Consumption propensity exponent
                                 # Controls how strongly savings affect spending:
                                 #   c_j = 1 / (1 + tanh(SA_j / SA_avg)^β)
                                 # Higher β = stronger response to savings
delta:                0.10       # Dividend payout ratio (share of profits)
                                 # Fraction of positive profits paid as dividends

# ── INITIAL CONDITIONS ────────────────────────────────────────────────────────
# Balance sheet values at t=0. Can be scalars (broadcast to all agents) or
# arrays of length n_firms/n_households for heterogeneous initialization.

price_init:           0.5        # Goods price at t=0 (money unit per good unit)
min_wage_ratio:       0.5        # Minimum wage at t=0 (as fraction of mean wage)
net_worth_ratio:      6.0        # Firm net worth at t=0 (as multiple of initial revenue)
equity_base_init:     5.0        # Bank equity at t=0 (money units)
savings_init:         1.0        # Household savings at t=0 (money units)

# ── NEW FIRM ENTRY PARAMETERS ───────────────────────────────────────────────
# Control how replacement firms are initialized after bankruptcy.
# New firms inherit attributes from the trimmed mean (90%) of surviving firms,
# scaled by these factors. This follows Delli Gatti et al. (2011) where new
# entrants start "below the average size of incumbent firms".

new_firm_size_factor: 0.5            # Core "size at entry" measure (as fraction of avg)
new_firm_production_factor: 0.5      # Initial output capacity as fraction of avg output
new_firm_wage_factor: 0.5            # Initial wage offer as a fraction of avg wage
new_firm_price_markup: 1.15          # Initial price markup over average market price

# ── RANDOM NUMBER GENERATION ──────────────────────────────────────────────────
# Seed for deterministic simulations.
# Set to null for non-deterministic behavior.

seed:                 0              # RNG seed (null = random seed)

# ── PIPELINE CONFIGURATION ────────────────────────────────────────────────────
# Path to custom event pipeline YAML. If null, uses config/default_pipeline.yml.
# Custom pipelines allow reordering events, removing events, or adding custom
# events. See config/default_pipeline.yml for syntax.

pipeline_path:      null             # Custom pipeline path (null = use default)

# ── LOGGING CONFIGURATION ─────────────────────────────────────────────────────
# Control log output verbosity globally and per-event.
# Levels: TRACE (5), DEBUG (10), INFO (20), WARNING (30), ERROR (40), CRITICAL (50)

logging:
  default_level:    INFO             # Default log level for all events
  log_file:         null             # Path to log file (null = console only)
  events:           {}               # Per-event overrides
                                     # Example:
                                     #   workers_send_one_round: WARNING
                                     #   firms_hire_workers: DEBUG
                                     #   firms_adjust_price: TRACE

# ── IMPLEMENTATION VARIANTS ─────────────────────────────────────────────────
# Control specific behavioral details. These parameters allow experimenting
# with different implementation choices to match reference model results.

max_loan_to_net_worth: 2             # Max loan as multiple of borrower's net worth
                                     # Caps individual loans: loan <= X * net_worth

max_leverage: 10                     # Maximum leverage ratio (fragility cap)
                                     # for interest rate calculation

job_search_method: all_firms         # How workers sample firms for job applications
                                     # "vacancies_only" = sample only firms with vacancies
                                     # "all_firms" = sample from ALL firms (wasted apps)

consumer_matching: loyalty           # Consumer firm selection strategy
                                     # "loyalty" = preferential attachment (largest prev producer)
                                     # "random" = pure random selection (no loyalty)

# === DEPRECATED (may be removed in future) ===================================
# These parameters are retained for backward compatibility but their values
# should not be changed. The defaults below are the only supported values.

price_cut_allow_increase: true       # DEPRECATED — Allow price increase when cutting
inflation_method: yoy                # DEPRECATED — Inflation calculation method
labor_matching: interleaved          # DEPRECATED — Always interleaved (cascade removed)
credit_matching: interleaved         # DEPRECATED — Always interleaved (cascade removed)
min_wage_ratchet: false              # DEPRECATED — Minimum wage ratchet
