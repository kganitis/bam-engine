# ==============================================================================
# BAM Baseline Scenario Validation Targets
# ==============================================================================
#
# Target metrics derived from Delli Gatti et al. (2011), Section 3.9.1
# "Macroeconomics from the Bottom-up" baseline scenario results.
#
# Structure:
#   metadata: Scenario configuration and book reference values
#   metrics: Validation targets with standardized keys
#     - MEAN_TOLERANCE checks: 'target', 'tolerance'
#     - RANGE checks: 'min', 'max'
#     - PCT_WITHIN checks: 'target', 'min'
#     - OUTLIER checks: 'max_outlier', 'penalty_weight'
#
# ==============================================================================

metadata:
  source: "Delli Gatti et al. (2011), Section 3.9.1"
  description: "Baseline scenario validation targets"

  validation:
    burn_in_periods: 500

  # Book simulation setup
  book_setup:
    n_firms: 100
    n_households: 500
    n_banks: 10
    n_periods: 1000

  # Visualization-specific target structure (used by baseline_viz.py)
  visualization:
    time_series:
      unemployment_rate:
        targets:
          normal_min: 0.03
          normal_max: 0.08
          extreme_min: 0.02
          extreme_max: 0.12
          mean_target: 0.06

      inflation_rate:
        targets:
          normal_min: -0.01
          normal_max: 0.08
          extreme_min: -0.05
          extreme_max: 0.15
          mean_target: 0.05

      log_gdp:
        targets:
          normal_min: 5.438
          normal_max: 5.491
          extreme_min: 5.394
          extreme_max: 5.501
          mean_target: 5.460

      real_wage:
        targets:
          normal_min: 0.30
          normal_max: 0.40
          extreme_min: 0.25
          extreme_max: 0.45
          mean_target: 0.34

    curves:
      phillips:
        targets:
          correlation_target: -0.10
          correlation_min: -0.50
          correlation_max: 0.05

      okun:
        targets:
          correlation_target: -0.85
          correlation_min: -0.98
          correlation_max: -0.70

      beveridge:
        targets:
          correlation_target: -0.27
          correlation_min: -0.50
          correlation_max: -0.10

    distributions:
      firm_size:
        targets:
          threshold_small: 5.0
          pct_below_small_target: 0.90
          skewness_min: 0.5
          skewness_max: 10.0
          tail_ratio_min: 2.0
          tail_ratio_max: 10.0

      vacancy_rate:
        targets:
          normal_min: 0.08
          normal_max: 0.18
          mean_target: 0.13


# ==============================================================================
# Metric Targets (standardized keys)
# ==============================================================================

metrics:

  # --------------------------------------------------------------------------
  # Unemployment Rate Metrics
  # --------------------------------------------------------------------------

  unemployment_rate_mean:
    # MEAN_TOLERANCE: mean should be ~6% (book Figure 3.2b)
    target: 0.06
    tolerance: 0.015

  unemployment_absolute_ceiling:
    # BOOLEAN: hard gate â€” model collapse if max > 20%
    threshold: 0.20

  unemployment_std:
    # RANGE: volatility should be ~2%
    min: 0.010
    max: 0.025

  unemployment_pct_above_floor:
    # PCT_WITHIN: 95% of periods should be above 2% (avoid degenerate low unemployment)
    target: 0.95
    min: 0.90
    floor: 0.02

  unemployment_pct_below_ceiling:
    # PCT_WITHIN: 95% of periods should be below 12%
    target: 0.95
    min: 0.85
    ceiling: 0.12

  # --------------------------------------------------------------------------
  # Inflation Rate Metrics
  # --------------------------------------------------------------------------

  inflation_rate_mean:
    # MEAN_TOLERANCE: mean should be ~5%
    target: 0.05
    tolerance: 0.02

  inflation_non_degenerate:
    # RANGE: mean inflation should be positive but not hyperinflation
    min: 0.0
    max: 0.10

  inflation_pct_in_bounds:
    # PCT_WITHIN: 90% of periods should be within extreme bounds
    target: 0.90
    min: 0.80
    bounds_min: -0.05
    bounds_max: 0.15

  inflation_std:
    # MEAN_TOLERANCE: volatility should be ~2.5%
    target: 0.025
    tolerance: 0.01

  # --------------------------------------------------------------------------
  # Real Wage and Productivity Metrics
  # --------------------------------------------------------------------------

  real_wage_mean:
    # MEAN_TOLERANCE: real wage ~34% of productivity
    target: 0.34
    tolerance: 0.03

  real_wage_std:
    # MEAN_TOLERANCE: mild fluctuations
    target: 0.01
    tolerance: 0.008

  productivity_flatness:
    # MEAN_TOLERANCE: productivity should be constant (std ~0)
    target: 0.0
    tolerance: 0.001

  wage_to_productivity_ratio:
    # RANGE: wages should be 60-80% of productivity
    min: 0.60
    max: 0.80

  vacancy_rate_mean:
    # MEAN_TOLERANCE: vacancy rate ~13%
    target: 0.13
    tolerance: 0.03

  vacancy_rate_pct_in_bounds:
    # PCT_WITHIN: vacancy rate should stay in [8%, 20%] most of the time
    target: 0.90
    min: 0.80
    bounds_min: 0.08
    bounds_max: 0.20

  # --------------------------------------------------------------------------
  # Curve Correlation Metrics
  # --------------------------------------------------------------------------

  phillips_correlation:
    # RANGE: weak negative correlation
    min: -0.50
    max: -0.05  # Changed from 0.05 - must be negative

  phillips_negative_sign:
    # RANGE: must be negative (structural property)
    min: -1.0
    max: 0.0

  okun_correlation:
    # RANGE: strong negative correlation
    min: -0.98
    max: -0.70

  okun_r_squared:
    # RANGE: at least 50% variance explained
    min: 0.50
    max: 1.0

  beveridge_correlation:
    # RANGE: moderate negative correlation
    min: -0.50
    max: -0.10

  beveridge_negative_sign:
    # RANGE: must be negative (structural property)
    min: -1.0
    max: 0.0

  # --------------------------------------------------------------------------
  # Firm Size Distribution Metrics
  # --------------------------------------------------------------------------

  firm_size_skewness:
    # RANGE: must be right-skewed
    min: 1.0
    max: 10.0

  firm_size_pct_below:
    # RANGE: most firms should be small
    min: 0.80
    max: 0.95
    threshold: 5.0

  firm_size_tail_ratio:
    # RANGE: long right tail but not dominated by single firm
    min: 2.0
    max: 10.0

  firm_size_pct_below_medium:
    # PCT_WITHIN: almost all firms below medium threshold
    target: 0.98
    min: 0.92
    threshold: 10.0
