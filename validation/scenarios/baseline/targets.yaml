# ==============================================================================
# BAM Baseline Scenario Validation Targets
# ==============================================================================
#
# Target metrics derived from Delli Gatti et al. (2011), Section 3.9.1
# "Macroeconomics from the Bottom-up" baseline scenario results.
#
# Structure:
#   metadata: Scenario configuration and book reference values
#   metrics: Validation targets with standardized keys
#     - MEAN_TOLERANCE checks: 'target', 'tolerance'
#     - RANGE checks: 'min', 'max'
#     - PCT_WITHIN checks: 'target', 'min'
#     - OUTLIER checks: 'max_outlier', 'penalty_weight'
#
# ==============================================================================

metadata:
  source: "Delli Gatti et al. (2011), Section 3.9.1"
  description: "Baseline scenario validation targets"

  validation:
    burn_in_periods: 500

  # Book simulation setup (reference)
  book_setup:
    n_firms: 100
    n_households: 500
    n_banks: 10
    n_periods: 1000

  # Our simulation setup
  our_setup:
    n_firms: 300
    n_households: 3000
    n_banks: 10

  # Parameters needed by compute_metrics
  params:
    firm_size_threshold: 5.0
    firm_size_threshold_medium: 10.0
    unemployment_extreme_bounds: [0.01, 0.15]
    inflation_extreme_bounds: [-0.05, 0.15]

  # Visualization-specific target structure (used by baseline_viz.py)
  visualization:
    time_series:
      unemployment_rate:
        targets:
          normal_min: 0.03
          normal_max: 0.09
          extreme_min: 0.01
          extreme_max: 0.15
          mean_target: 0.055

      inflation_rate:
        targets:
          normal_min: -0.01
          normal_max: 0.08
          extreme_min: -0.05
          extreme_max: 0.15
          mean_target: 0.05

      log_gdp:
        targets:
          normal_min: 7.22
          normal_max: 7.28
          extreme_min: 7.15
          extreme_max: 7.30
          mean_target: 7.26

      real_wage:
        targets:
          normal_min: 0.30
          normal_max: 0.40
          extreme_min: 0.25
          extreme_max: 0.45
          mean_target: 0.34

    curves:
      phillips:
        targets:
          correlation_target: -0.10
          correlation_min: -0.50
          correlation_max: 0.05

      okun:
        targets:
          correlation_target: -0.85
          correlation_min: -0.98
          correlation_max: -0.70

      beveridge:
        targets:
          correlation_target: -0.27
          correlation_min: -0.50
          correlation_max: -0.10

    distributions:
      firm_size:
        targets:
          threshold_small: 5.0
          pct_below_small_target: 0.90
          skewness_min: 1.0
          skewness_max: 10.0
          tail_ratio_min: 2.0
          tail_ratio_max: 8.0

      vacancy_rate:
        targets:
          normal_min: 0.08
          normal_max: 0.18
          mean_target: 0.13


# ==============================================================================
# Metric Targets (standardized keys)
# ==============================================================================

metrics:

  # --------------------------------------------------------------------------
  # Unemployment Rate Metrics
  # --------------------------------------------------------------------------

  unemployment_rate_mean:
    # MEAN_TOLERANCE: mean should be ~5.5%
    target: 0.055
    tolerance: 0.015

  unemployment_hard_ceiling:
    # RANGE: max unemployment should stay below 30% (model breakdown indicator)
    min: 0.0
    max: 0.30

  unemployment_pct_in_bounds:
    # PCT_WITHIN: 90% of periods should be within extreme bounds
    target: 0.90
    min: 0.80

  unemployment_std:
    # MEAN_TOLERANCE: volatility should be ~2%
    target: 0.02
    tolerance: 0.01

  unemployment_autocorrelation:
    # RANGE: lag-1 autocorrelation should show persistence but not unit root
    min: 0.30
    max: 0.99

  # --------------------------------------------------------------------------
  # Inflation Rate Metrics
  # --------------------------------------------------------------------------

  inflation_rate_mean:
    # MEAN_TOLERANCE: mean should be ~5%
    target: 0.05
    tolerance: 0.02

  inflation_non_degenerate:
    # RANGE: mean inflation should be positive but not hyperinflation
    min: 0.0
    max: 0.10

  inflation_pct_in_bounds:
    # PCT_WITHIN: 90% of periods should be within extreme bounds
    target: 0.90
    min: 0.80

  inflation_std:
    # MEAN_TOLERANCE: volatility should be ~2.5%
    target: 0.025
    tolerance: 0.01

  # --------------------------------------------------------------------------
  # Real Wage and Productivity Metrics
  # --------------------------------------------------------------------------

  real_wage_mean:
    # MEAN_TOLERANCE: real wage ~34% of productivity
    target: 0.34
    tolerance: 0.03

  real_wage_std:
    # MEAN_TOLERANCE: mild fluctuations
    target: 0.01
    tolerance: 0.008

  productivity_flatness:
    # MEAN_TOLERANCE: productivity should be constant (std ~0)
    target: 0.0
    tolerance: 0.001

  wage_to_productivity_ratio:
    # RANGE: wages should be 60-80% of productivity
    min: 0.60
    max: 0.80

  vacancy_rate_mean:
    # MEAN_TOLERANCE: vacancy rate ~13%
    target: 0.13
    tolerance: 0.03

  vacancy_rate_pct_in_bounds:
    # PCT_WITHIN: vacancy rate should stay in [8%, 20%] most of the time
    target: 0.90
    min: 0.80

  # --------------------------------------------------------------------------
  # Curve Correlation Metrics
  # --------------------------------------------------------------------------

  phillips_correlation:
    # RANGE: weak negative correlation
    min: -0.50
    max: -0.05  # Changed from 0.05 - must be negative

  phillips_negative_sign:
    # RANGE: must be negative (structural property)
    min: -1.0
    max: 0.0

  okun_correlation:
    # RANGE: strong negative correlation
    min: -0.98
    max: -0.70

  okun_r_squared:
    # RANGE: at least 50% variance explained
    min: 0.50
    max: 1.0

  beveridge_correlation:
    # RANGE: moderate negative correlation
    min: -0.50
    max: -0.10

  beveridge_negative_sign:
    # RANGE: must be negative (structural property)
    min: -1.0
    max: 0.0

  # --------------------------------------------------------------------------
  # Firm Size Distribution Metrics
  # --------------------------------------------------------------------------

  firm_size_skewness:
    # RANGE: must be right-skewed
    min: 1.0
    max: 10.0

  firm_size_pct_below:
    # RANGE: most firms should be small
    min: 0.80
    max: 0.95

  firm_size_tail_ratio:
    # RANGE: long right tail but not dominated by single firm
    min: 2.0
    max: 8.0

  firm_size_pct_below_medium:
    # PCT_WITHIN: almost all firms below medium threshold
    target: 0.98
    min: 0.92
